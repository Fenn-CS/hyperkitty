{% extends "base_message.html" %}
{% load gravatar %}

{% block title %}{{ app_name }}{% endblock %}

{% block additional_headers %}
  <link rel="stylesheet" type="text/css" media="all" href="{{ STATIC_URL }}css/thread.css" />

{% endblock %}

{% block content %}

  <div class="content">

    <!-- main section, the email thread -->
    <section id="thread_content">

      <!-- Start first email -->
      <div class="first_email">
        <div class="email_header">
          {% gravatar_img_for_email message.email 40 %}
          <div class="email_author inline-block">
            <span class="name">{{message.sender}}</span> 
            <br />
            <span class="rank">Rank 10</span>
          </div>
          <div class="email_date inline-block right">
            <span class="date">{{message.date}}</span>
            <br />
            <span class="time"></span>
          </div>
        </div>
        <div id="first_email_body">
            {{message.content}}
        </div>
        <ul class="email_info inline">
          <li class="neutral"> 0 </li>
          <li id="voteup"><a href="#"> Like </a></li>
          <li id="votedown"><a href="#"> Dislike</a></li>
          <li class="discussion add_comment"> <a href="#comment"> Add your own comment</a></li>
        </ul>
      </div>
      <!-- End first email -->

    </section>

  </div> <!-- end of content -->
{% endblock %}

{% block additionaljs %}

<script type="text/javascript">

$(document).ready(function() {
	    $("#voteup").click(function(){  
	    	$.ajax({
	        	type: "POST",
		        url: '/vote/{{list_address}}/{{message.message_id}}/',
		        data: { vote : 1, messageid : "{{message.message_id}}" ,  list: "{{list_address}}", csrfmiddlewaretoken: '{{ csrf_token }}' },
		        success: function(response){
		            alert(response);
		        }
	        });
	    	return false;
	    });

	    $("#votedown").click(function(){  
	    	$.ajax({
	        	type: "POST",
		        url: '/vote/{{list_address}}/{{message.message_id}}/',
		        data: { vote : -1, messageid : "{{message.message_id}}" ,  list: "{{list_address}}", csrfmiddlewaretoken: '{{ csrf_token }}' },
		        success: function(response){
		            alert(response);
		        }
	        });
	    	return false;
	    });

});

</script>

{% endblock %}
